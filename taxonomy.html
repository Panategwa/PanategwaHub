<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panategwa d Taxonomy</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  #taxonomy-container button, #control-buttons button { display: block; margin: 5px 0; padding: 8px 12px; cursor: pointer; }
  #search-results div { margin: 3px 0; padding: 5px; background: #eee; cursor: pointer; }
  #search-results div:hover { background: #ddd; }
  #breadcrumbs { margin-bottom: 10px; font-weight: bold; }
  #current-rank { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
  #info-box { margin-top: 15px; padding: 10px; background: #f2f2f2; border-radius: 5px; }
  input { margin-bottom: 10px; padding: 6px; width: 300px; }
</style>
</head>
<body>

<h1>Panategwa d Taxonomy Explorer</h1>

<div id="current-rank">Domains</div>
<div id="breadcrumbs"></div>

<div id="control-buttons">
  <button id="close-button">âœ– Close All</button>
</div>

<input type="text" id="search-bar" placeholder="Search any rank...">
<div id="search-results"></div>

<div id="taxonomy-container"></div>
<div id="info-box">Select a rank to see info here...</div>

<script>
// --- TAXONOMY DATA (nested object style) ---
const taxonomy = {
  Eukarya: {
    info: "Eukarya are organisms with a nucleus.",
    Animalia: {
      info: "Multicellular animals.",
      Chordata: {
        info: "Animals with a notochord.",
        Mammalia: {
          info: "Warm-blooded vertebrates with hair.",
          Primates: {
            info: "Large-brained, forward-facing eyes.",
            Hominidae: {
              info: "Great apes and humans.",
              Homo: {
                info: "Genus of humans.",
                "Homo sapiens": { info: "Modern humans." }
              },
              Triopanathropus: {
                info: "Fictional Panategwan genus.",
                "Triopanathropus panategwanus": { info: "Native species of Panategwa d." }
              }
            }
          }
        }
      }
    },
    Plantae: { info: "Multicellular plants." }
  },
  Prokarya: { info: "Single-celled organisms without a nucleus." },
  "Mycota-Pan": { info: "Fungi-like organisms." }
};

// --- STATE ---
let currentPath = [];
let currentNode = taxonomy;

// --- FUNCTIONS ---
function getRankName(level){
  const ranks = ["Domain","Kingdom","Phylum","Class","Order","Family","Genus","Species"];
  return ranks[level] || "";
}

function renderLevel(node){
  const container = document.getElementById("taxonomy-container");
  container.innerHTML = "";
  Object.keys(node).forEach(key => {
    if(key === "info") return;
    const btn = document.createElement("button");
    btn.textContent = key;
    btn.onclick = () => {
      currentPath.push(key);
      currentNode = node[key];
      renderLevel(currentNode);
      updateUI();
    };
    container.appendChild(btn);
  });
  updateUI();
}

function updateUI(){
  document.getElementById("breadcrumbs").textContent = currentPath.join(" > ");
  document.getElementById("current-rank").textContent = currentPath.map((_, i) => getRankName(i)).join(" > ");
  const infoBox = document.getElementById("info-box");
  infoBox.textContent = currentNode.info || "No info available for this rank.";
}

// --- SEARCH FUNCTIONS ---
function findRanks(query, node = taxonomy, path = []){
  let matches = [];
  for(let key in node){
    if(key === "info") continue;
    if(key.toLowerCase().includes(query)) matches.push({ path:[...path, key], node: node[key] });
    if(typeof node[key] === "object") matches = matches.concat(findRanks(query, node[key], [...path, key]));
  }
  return matches;
}

function showSearchResults(results){
  const container = document.getElementById("search-results");
  container.innerHTML = "";
  results.forEach(item => {
    const div = document.createElement("div");
    div.textContent = item.path.join(" > ");
    div.onclick = () => {
      currentPath = item.path;
      currentNode = item.node;
      renderLevel(currentNode);
      updateUI();
      container.innerHTML = "";
      document.getElementById("search-bar").value = "";
    };
    container.appendChild(div);
  });
}

// --- EVENT LISTENERS ---
document.getElementById("search-bar").addEventListener("input", e => {
  const query = e.target.value.toLowerCase();
  const results = findRanks(query);
  showSearchResults(results);
});

document.getElementById("close-button").addEventListener("click", () => {
  currentPath = [];
  currentNode = taxonomy;
  renderLevel(currentNode);
  document.getElementById("breadcrumbs").textContent = "";
  document.getElementById("search-results").innerHTML = "";
  document.getElementById("search-bar").value = "";
});

// --- INITIAL RENDER ---
renderLevel(currentNode);
</script>

</body>
</html>
